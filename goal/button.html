<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로봇 내비게이션</title>
    <link rel="stylesheet" href="styles_navi.css"> <!-- 필요한 경우 스타일시트 링크 추가 -->
</head>
<body>
    <div class="container">

        <div class="preset-navigation">
            <button onclick="navigateToPreset(1)">롤러코스터</button>
            <button onclick="navigateToPreset(2)">회전목마</button>
            <button onclick="navigateToPreset(3)">관람차</button>
            <button onclick="navigateToPreset(4)">바이킹</button>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/roslib@1.1.0/build/roslib.min.js"></script>
    <script>
        var ros = new ROSLIB.Ros({
            url: 'ws://192.168.123.118:9090'
        });

        ros.on('connection', function() {
            console.log('Connected to ROS');
            updateConnectionStatus(true);
        });

        ros.on('error', function(error) {
            console.log('Error connecting to ROS:', error);
            updateConnectionStatus(false);
        });

        ros.on('close', function() {
            console.log('Disconnected from ROS');
            updateConnectionStatus(false);
        });

        function startNavigation(destinationX, destinationY, destinationZ, destinationW) {
            var goalMessage = new ROSLIB.Message({
                header: {
                    frame_id: 'map', // 목적지는 맵 기준 좌표로 설정
                    stamp: { secs: 0, nsecs: 0 }
                },
                pose: {
                    position: {
                        x: destinationX,
                        y: destinationY,
                        z: 0.0
                    },
                    orientation: {
                        x: 0.0,
                        y: 0.0,
                        z: destinationZ,
                        w: destinationW
                    }
                }
            });

            var goalPublisher = new ROSLIB.Topic({
                ros: ros,
                name: '/move_base_simple/goal',
                messageType: 'geometry_msgs/PoseStamped'
            });

            goalPublisher.publish(goalMessage);
            console.log('Sent navigation goal:', destinationX, destinationY, destinationZ, destinationW);
        }

        function navigateToPreset(presetNumber) {
            var presets = {
                1: {x: -1.7, y: 13.0, z: 1.0, w: 0.0},
                2: {x: -18.5, y: 13.0, z: -0.7, w: 0.7},
                3: {x: -18.5, y: 5.0, z: 0.0, w: 1.0},
                4: {x: -4.0, y: 4.0, z: 0.0, w: 1.0}
            };

            var preset = presets[presetNumber];

            if (preset) {
                startNavigation(preset.x, preset.y, preset.z, preset.w);
            } else {
                console.error('Invalid preset number:', presetNumber);
            }
        }
    </script>
</body>
</html>
